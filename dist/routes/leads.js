"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const express_1 = require("express");
const leadController_1 = require("../controllers/leadController");
const excelController_1 = require("../controllers/excelController");
const upload_1 = require("../middleware/upload");
const auth_1 = require("../middleware/auth");
const router = (0, express_1.Router)();
router.use(auth_1.authenticateToken, auth_1.requireAuth);
router.get('/my-leads', leadController_1.getMyLeads);
router.get('/my-leads/stats', leadController_1.getMyLeadsStats);
router.get('/folders', leadController_1.getDistinctFolders);
router.get('/folder-counts', leadController_1.getFolderCounts);
router.post('/assign', auth_1.requireAdmin, leadController_1.assignLeads);
router.post('/unassign', auth_1.requireAdmin, leadController_1.unassignLeads);
router.put('/bulk-status', leadController_1.bulkUpdateStatus);
router.post('/notes', leadController_1.addNote);
router.get('/import/fields', auth_1.requireAdmin, excelController_1.getLeadFields);
router.post('/import/analyze', auth_1.requireAdmin, upload_1.uploadExcel, upload_1.handleUploadError, upload_1.validateFilePresence, excelController_1.analyzeExcelFile);
router.post('/import/preview', auth_1.requireAdmin, upload_1.uploadExcel, upload_1.handleUploadError, upload_1.validateFilePresence, excelController_1.getSheetPreview);
router.post('/import', auth_1.requireAdmin, upload_1.uploadExcel, upload_1.handleUploadError, upload_1.validateFilePresence, excelController_1.importWithMapping);
router.post('/import/google-sheet', leadController_1.importLeadsFromGoogleSheet);
router.get('/', leadController_1.getLeads);
router.get('/:id', leadController_1.getLeadById);
router.post('/', leadController_1.createLead);
router.put('/:id', leadController_1.updateLead);
router.delete('/:id', auth_1.requireAdmin, leadController_1.deleteLead);
exports.default = router;
//# sourceMappingURL=leads.js.map